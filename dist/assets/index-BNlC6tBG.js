import{s as W}from"./index-D5SxelaQ.js";import{a as O,c as q,d as E}from"./index-BESmW-u8.js";import{s as V}from"./index-BF9koIpW.js";import{B as se,W as oe,G as B,al as ne,d as ie,c as f,o as c,j as b,e as S,b as s,m as z,k as _,at as H,w as l,n as N,F,A as $,y as p,r as y,M as G,a as n,N as r,P as R,R as A,i as J,t as Z,J as le,Z as de,L as ce,q as X}from"./index-Ba0-uRri.js";import{a as ue}from"./index-Gy2Ib5eE.js";import{a as pe}from"./index-DhCtX0vz.js";import{s as ge}from"./index-Dxu6QYF5.js";import{h as Y,o as ee,s as L,a as te}from"./schemas--iTa1Wle.js";import{b as M}from"./index-DAcr8GVB.js";import{s as I}from"./index-BReoh1wR.js";import{s as Q}from"./index-Bft8jWOf.js";import{b as me}from"./helpers-DvEhqxW7.js";import"./index-MfaGrLR4.js";var ve=`
    .p-dataview {
        position: relative;
        border-color: dt('dataview.border.color');
        border-width: dt('dataview.border.width');
        border-style: solid;
        border-radius: dt('dataview.border.radius');
        padding: dt('dataview.padding');
    }

    .p-dataview-header {
        background: dt('dataview.header.background');
        color: dt('dataview.header.color');
        border-color: dt('dataview.header.border.color');
        border-width: dt('dataview.header.border.width');
        border-style: solid;
        padding: dt('dataview.header.padding');
        border-radius: dt('dataview.header.border.radius');
    }

    .p-dataview-content {
        background: dt('dataview.content.background');
        border-color: dt('dataview.content.border.color');
        border-width: dt('dataview.content.border.width');
        border-style: solid;
        color: dt('dataview.content.color');
        padding: dt('dataview.content.padding');
        border-radius: dt('dataview.content.border.radius');
    }

    .p-dataview-footer {
        background: dt('dataview.footer.background');
        color: dt('dataview.footer.color');
        border-color: dt('dataview.footer.border.color');
        border-width: dt('dataview.footer.border.width');
        border-style: solid;
        padding: dt('dataview.footer.padding');
        border-radius: dt('dataview.footer.border.radius');
    }

    .p-dataview-paginator-top {
        border-width: dt('dataview.paginator.top.border.width');
        border-color: dt('dataview.paginator.top.border.color');
        border-style: solid;
    }

    .p-dataview-paginator-bottom {
        border-width: dt('dataview.paginator.bottom.border.width');
        border-color: dt('dataview.paginator.bottom.border.color');
        border-style: solid;
    }

    .p-dataview-loading-overlay {
        position: absolute;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
    }
`,fe={root:function(t){var o=t.props;return["p-dataview p-component",{"p-dataview-list":o.layout==="list","p-dataview-grid":o.layout==="grid"}]},header:"p-dataview-header",pcPaginator:function(t){var o=t.position;return"p-dataview-paginator-"+o},content:"p-dataview-content",emptyMessage:"p-dataview-empty-message",footer:"p-dataview-footer"},he=se.extend({name:"dataview",style:ve,classes:fe}),ye={name:"BaseDataView",extends:pe,props:{value:{type:Array,default:null},layout:{type:String,default:"list"},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:String,default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},lazy:{type:Boolean,default:!1},dataKey:{type:String,default:null}},style:he,provide:function(){return{$pcDataView:this,$parentInstance:this}}};function we(e){return Pe(e)||_e(e)||ke(e)||be()}function be(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ke(e,t){if(e){if(typeof e=="string")return K(e,t);var o={}.toString.call(e).slice(8,-1);return o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set"?Array.from(e):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?K(e,t):void 0}}function _e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pe(e){if(Array.isArray(e))return K(e)}function K(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,g=Array(t);o<t;o++)g[o]=e[o];return g}var U={name:"DataView",extends:ye,inheritAttrs:!1,emits:["update:first","update:rows","page"],data:function(){return{d_first:this.first,d_rows:this.rows}},watch:{first:function(t){this.d_first=t},rows:function(t){this.d_rows=t},sortField:function(){this.resetPage()},sortOrder:function(){this.resetPage()}},methods:{getKey:function(t,o){return this.dataKey?B(t,this.dataKey):o},onPage:function(t){this.d_first=t.first,this.d_rows=t.rows,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",t)},sort:function(){var t=this;if(this.value){var o=we(this.value),g=oe();return o.sort(function(m,d){var v=B(m,t.sortField),a=B(d,t.sortField);return ne(v,a,t.sortOrder,g)}),o}else return null},resetPage:function(){this.d_first=0,this.$emit("update:first",this.d_first)}},computed:{getTotalRecords:function(){return this.totalRecords?this.totalRecords:this.value?this.value.length:0},empty:function(){return!this.value||this.value.length===0},emptyMessageText:function(){var t;return((t=this.$primevue.config)===null||t===void 0||(t=t.locale)===null||t===void 0?void 0:t.emptyMessage)||""},paginatorTop:function(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom:function(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},items:function(){if(this.value&&this.value.length){var t=this.value;if(t&&t.length&&this.sortField&&(t=this.sort()),this.paginator){var o=this.lazy?0:this.d_first;return t.slice(o,o+this.d_rows)}else return t}else return null}},components:{DVPaginator:ue}};function Ce(e,t,o,g,m,d){var v=ie("DVPaginator");return c(),f("div",z({class:e.cx("root")},e.ptmi("root")),[e.$slots.header?(c(),f("div",z({key:0,class:e.cx("header")},e.ptm("header")),[_(e.$slots,"header")],16)):b("",!0),d.paginatorTop?(c(),S(v,{key:1,rows:m.d_rows,first:m.d_first,totalRecords:d.getTotalRecords,pageLinkSize:e.pageLinkSize,template:e.paginatorTemplate,rowsPerPageOptions:e.rowsPerPageOptions,currentPageReportTemplate:e.currentPageReportTemplate,class:N(e.cx("pcPaginator",{position:"top"})),alwaysShow:e.alwaysShowPaginator,onPage:t[0]||(t[0]=function(a){return d.onPage(a)}),unstyled:e.unstyled,pt:e.ptm("pcPaginator")},H({_:2},[e.$slots.paginatorcontainer?{name:"container",fn:l(function(a){return[_(e.$slots,"paginatorcontainer",{first:a.first,last:a.last,rows:a.rows,page:a.page,pageCount:a.pageCount,pageLinks:a.pageLinks,totalRecords:a.totalRecords,firstPageCallback:a.firstPageCallback,lastPageCallback:a.lastPageCallback,prevPageCallback:a.prevPageCallback,nextPageCallback:a.nextPageCallback,rowChangeCallback:a.rowChangeCallback,changePageCallback:a.changePageCallback})]}),key:"0"}:void 0,e.$slots.paginatorstart?{name:"start",fn:l(function(){return[_(e.$slots,"paginatorstart")]}),key:"1"}:void 0,e.$slots.paginatorend?{name:"end",fn:l(function(){return[_(e.$slots,"paginatorend")]}),key:"2"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):b("",!0),s("div",z({class:e.cx("content")},e.ptm("content")),[d.empty?(c(),f("div",z({key:1,class:e.cx("emptyMessage")},e.ptm("emptyMessage")),[_(e.$slots,"empty",{layout:e.layout},function(){return[$(p(d.emptyMessageText),1)]})],16)):(c(),f(F,{key:0},[e.$slots.list&&e.layout==="list"?_(e.$slots,"list",{key:0,items:d.items}):b("",!0),e.$slots.grid&&e.layout==="grid"?_(e.$slots,"grid",{key:1,items:d.items}):b("",!0)],64))],16),d.paginatorBottom?(c(),S(v,{key:2,rows:m.d_rows,first:m.d_first,totalRecords:d.getTotalRecords,pageLinkSize:e.pageLinkSize,template:e.paginatorTemplate,rowsPerPageOptions:e.rowsPerPageOptions,currentPageReportTemplate:e.currentPageReportTemplate,class:N(e.cx("pcPaginator",{position:"bottom"})),alwaysShow:e.alwaysShowPaginator,onPage:t[1]||(t[1]=function(a){return d.onPage(a)}),unstyled:e.unstyled,pt:e.ptm("pcPaginator")},H({_:2},[e.$slots.paginatorcontainer?{name:"container",fn:l(function(a){return[_(e.$slots,"paginatorcontainer",{first:a.first,last:a.last,rows:a.rows,page:a.page,pageCount:a.pageCount,pageLinks:a.pageLinks,totalRecords:a.totalRecords,firstPageCallback:a.firstPageCallback,lastPageCallback:a.lastPageCallback,prevPageCallback:a.prevPageCallback,nextPageCallback:a.nextPageCallback,rowChangeCallback:a.rowChangeCallback,changePageCallback:a.changePageCallback})]}),key:"0"}:void 0,e.$slots.paginatorstart?{name:"start",fn:l(function(){return[_(e.$slots,"paginatorstart")]}),key:"1"}:void 0,e.$slots.paginatorend?{name:"end",fn:l(function(){return[_(e.$slots,"paginatorend")]}),key:"2"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):b("",!0),e.$slots.footer?(c(),f("div",z({key:3,class:e.cx("footer")},e.ptm("footer")),[_(e.$slots,"footer")],16)):b("",!0)],16)}U.render=Ce;const Ae={class:"flex items-center justify-center"},Te={__name:"AddAddress",emits:["addressAdd"],setup(e,{emit:t}){const o=y([]),g=y([]),m=y([]),d=t,v=y(Y(ee({province:L().min(1,"Tỉnh/Thành phố is required"),district:L().min(1,"Quận/Huyện is required"),ward:L().min(1,"Phường/Xã is required"),address:L().min(1,"Địa chỉ is required")}))),a=async()=>{try{const u=await R.get("/connector/viettelpost/provinces");u.data.data.error?A.error(u.data.data.message||"Lỗi khi lấy tỉnh/thành phố"):o.value=u.data.data.data}catch(u){console.error(u)}},w=async u=>{const P=o.value.find(i=>i.PROVINCE_NAME===u)?.PROVINCE_ID;if(!P){A.error("Không tìm thấy Id tỉnh");return}try{const i=await R.get("/connector/viettelpost/districts",{params:{provinceId:P}});i.data.data.error?A.error(i.data.data.message||"Lỗi khi lấy quận/huyện"):g.value=i.data.data.data}catch(i){console.error(i)}},T=async u=>{const P=g.value.find(i=>i.DISTRICT_NAME===u)?.DISTRICT_ID;if(!P){A.error("Không tìm thấy Id quận");return}try{const i=await R.get("/connector/viettelpost/wards",{params:{districtId:P}});i.data.data.error?A.error(i.data.data.message||"Lỗi khi lấy phường/xã"):m.value=i.data.data.data}catch(i){console.error(i)}},D=async u=>{if(!u.valid){A.error("Vui lòng nhập đầy đủ thông tin");return}const P=`${u.values.address}, ${u.values.ward}, ${u.values.district}, ${u.values.province}`;try{const i=await R.post("/customer/address",{address:P});i.data.success?(A.success("Thêm địa chỉ thành công"),d("addressAdd")):A.error(i.data.message||"Lỗi khi thêm địa chỉ")}catch(i){console.error(i)}};return G(()=>{a()}),(u,P)=>(c(),f("div",Ae,[n(r(te),{initialValues:{province:"",district:"",ward:"",address:""},resolver:v.value,onSubmit:D,class:"w-full flex flex-col gap-4"},{default:l(i=>[s("div",null,[n(r(M),{name:"province",optionLabel:"PROVINCE_NAME",optionValue:"PROVINCE_NAME",options:o.value,placeholder:"Tỉnh/Thành phố",onChange:j=>w(i.province.value),class:"min-w-64 w-full"},null,8,["options","onChange"]),i.province?.invalid?(c(),S(r(I),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(p(i.province.error?.message),1)]),_:2},1024)):b("",!0)]),s("div",null,[n(r(M),{name:"district",optionLabel:"DISTRICT_NAME",optionValue:"DISTRICT_NAME",options:g.value,placeholder:"Quận/Huyện",onChange:j=>T(i.district.value),class:"min-w-64 w-full"},null,8,["options","onChange"]),i.district?.invalid?(c(),S(r(I),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(p(i.district.error?.message),1)]),_:2},1024)):b("",!0)]),s("div",null,[n(r(M),{name:"ward",optionLabel:"WARDS_NAME",optionValue:"WARDS_NAME",options:m.value,placeholder:"Phường/Xã",class:"min-w-64 w-full"},null,8,["options"]),i.ward?.invalid?(c(),S(r(I),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(p(i.ward.error?.message),1)]),_:2},1024)):b("",!0)]),s("div",null,[n(r(O),{name:"address",placeholder:"Địa chỉ",class:"min-w-64 w-full"}),i.address?.invalid?(c(),S(r(I),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(p(i.address.error?.message),1)]),_:2},1024)):b("",!0)]),n(r(V),{type:"submit",label:"Thêm",class:"w-full"})]),_:1},8,["resolver"])]))}},Se={class:"flex flex-col gap-1"},xe={class:"flex flex-col gap-1"},$e={__name:"ConnectCarrier",setup(e){const t=y(!1),o=y([{name:"Viettel Post",value:"VIETTEL_POST"}]),g=()=>{t.value=!t.value},m=y(Y(ee({carrier:L().min(1,"Đối tác vận chuyển is required"),email:L().min(1,"Email is required"),password:L().min(1,"Password is required")}))),d=v=>{console.log(v)};return(v,a)=>(c(),f("div",null,[n(r(te),{initialValues:{email:"",password:""},resolver:m.value,onSubmit:d,class:"flex flex-col gap-4 w-full"},{default:l(w=>[n(r(M),{name:"carrier",optionLabel:"name",optionValue:"value",options:o.value,placeholder:"Chọn đối tác vận chuyển",class:"min-w-64"},null,8,["options"]),s("div",Se,[n(r(Q),{variant:"on"},{default:l(()=>[n(r(q),{name:"email"},{default:l(()=>[n(r(E),{class:"pi pi-envelope"}),n(r(O),{id:"email",name:"email",type:"text",fluid:""})]),_:1}),a[0]||(a[0]=s("label",{for:"email"},"Email",-1))]),_:1}),w.email?.invalid?(c(),S(r(I),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(p(w.email.error?.message),1)]),_:2},1024)):b("",!0)]),s("div",xe,[n(r(Q),{variant:"on"},{default:l(()=>[n(r(q),{name:"password"},{default:l(()=>[n(r(E),{class:"pi pi-lock"}),n(r(O),{id:"password",name:"password",type:t.value?"text":"password",fluid:""},null,8,["type"]),n(r(E),{class:N(t.value?"pi pi-eye":"pi pi-eye-slash"),onClick:g},null,8,["class"])]),_:1}),a[1]||(a[1]=s("label",{for:"password"},"Password",-1))]),_:1}),w.password?.invalid?(c(),S(r(I),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(p(w.password.error?.message),1)]),_:2},1024)):b("",!0)]),n(r(V),{type:"submit",severity:"primary",label:"Đăng nhập"})]),_:1},8,["resolver"])]))}},Re={class:"flex items-center gap-1 p-2 border-b border-surface-200 dark:border-surface-700 hover:bg-primary-50"},Le={class:"text-sm block w-full"},Ve={class:"flex items-center justify-end gap-2"},Ie={__name:"index",props:{address:{type:Object,required:!0}},emits:["deleteAddress"],setup(e,{emit:t}){const o=e,g=t,m=y(o.address.address),d=y(o.address.id),v=()=>{navigator.clipboard.writeText(m.value)},a=async()=>{try{(await R.delete("/customer/address",{data:{id:d.value}})).data.success&&(A.success("Xóa địa chỉ thành công"),g("deleteAddress"))}catch(w){console.error(w),A.error("Xóa địa chỉ thất bại")}};return(w,T)=>{const D=J("tooltip");return c(),f("div",Re,[T[0]||(T[0]=s("i",{class:"pi pi-map-marker text-primary"},null,-1)),s("span",Le,p(m.value),1),s("div",Ve,[Z(n(r(V),{size:"small",icon:"pi pi-clone",variant:"outlined",rounded:"",severity:"help",onClick:v},null,512),[[D,"Đã sao chép",void 0,{focus:!0,top:!0}]]),n(r(V),{size:"small",icon:"pi pi-trash",variant:"outlined",rounded:"",severity:"danger",onClick:a})])])}}},De={class:"p-4"},ze={class:"text-2xl font-bold"},Ne={class:"text-sm text-gray-500"},Ee={class:"mt-4 flex flex-col gap-4"},Me={class:"flex items-center gap-2"},Oe={class:"text-sm text-color"},je={class:"text-sm text-muted-color"},Be={class:"flex flex-col gap-4"},qe={class:"flex items-center justify-between py-2"},Fe={class:"flex items-center justify-between py-2"},Ke={class:"grid grid-cols-4 gap-4 w-full"},Ue={class:"flex items-center gap-2"},We=["src","alt"],He={class:"font-semibold"},Xe={class:"text-sm text-gray-500 flex items-center gap-1"},Qe={class:"text-sm text-gray-500 flex items-center"},Ge={class:"text-sm text-gray-500 flex justify-end"},Je={class:"flex items-center justify-between"},Ze={class:"flex items-center gap-2"},Ye={class:"text-sm text-color"},et={class:"text-sm text-muted-color"},tt={class:"text-color font-bold text-xl"},at={key:0},rt={key:1},ht={__name:"index",setup(e){const{t}=le(),o=de(),g=y(""),m=ce(()=>o.userAddress),d=y(!1),v=y(null),a=y(""),w={GHN:"/images/carrier-logos/ghn.png",VIETTEL_POST:"/images/carrier-logos/vtp.png"},T=y([]),D=async()=>{try{const C=await R.get("/connector/viettelpost/general-info");C.data.success&&(T.value=C.data.carriers.map(h=>({id:h.id,name:h.carrier,img:w[h.carrier],status:Date.now()<new Date(h.expiredAt)?"active":"expired",expiredAt:me(h.expiredAt)})))}catch(C){console.error(C)}},u=async()=>{try{const C=await R.get("/customer/address");C.data.success&&o.setUserAddress(C.data.data)}catch(C){console.error(C)}},P=()=>{d.value=!0,v.value=1,a.value="Thêm địa chỉ"},i=()=>{u(),d.value=!1},j=()=>{u()},ae=()=>{d.value=!0,v.value=2,a.value="Kết nối"};return G(()=>{D(),u()}),(C,h)=>{const re=J("tooltip");return c(),f("div",De,[s("h1",ze,p(r(t)("settings")),1),s("span",Ne,p(r(t)("settingDescription")),1),s("div",Ee,[n(r(W),null,{title:l(()=>[s("div",Me,[h[2]||(h[2]=s("i",{class:"pi pi-truck text-primary"},null,-1)),s("span",Oe,p(r(t)("carrier")),1)]),s("div",null,[s("span",je,p(r(t)("manageConnectedCarrier")),1)])]),content:l(()=>[s("div",Be,[s("div",qe,[n(r(q),null,{default:l(()=>[n(r(E),{class:"pi pi-search"}),n(r(O),{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=x=>g.value=x),placeholder:"Search",size:"small"},null,8,["modelValue"])]),_:1}),n(r(V),{onClick:ae,label:r(t)("add"),size:"small",icon:"pi pi-plus",class:"ml-2"},null,8,["label"])]),s("div",Fe,[n(r(U),{value:T.value,paginator:"",rows:5,total:T.value.length,class:"w-full"},{list:l(x=>[(c(!0),f(F,null,X(x.items,k=>(c(),f("div",{key:k.id,class:"p-2 border-b border-surface-200 dark:border-surface-700"},[s("div",Ke,[s("div",Ue,[s("img",{src:k.img,alt:k.name,class:"w-8 h-8 object-contain rounded-sm"},null,8,We),s("span",He,p(k.name),1)]),s("div",Xe,[s("span",{class:N(["block w-2 h-2 rounded-full",[k.status==="active"?"bg-green-500":"bg-gray-500"]])},null,2),s("span",{class:N(["capitalize",[k.status==="active"?"text-green-600":"text-gray-600"]])},p(k.status),3)]),s("div",Qe,p(r(t)("expiredAt"))+": "+p(k.expiredAt),1),s("div",Ge,[Z(n(r(V),{size:"small",icon:"pi pi-sign-out",variant:"text"},null,512),[[re,"Disconnect",void 0,{top:!0}]])])])]))),128))]),_:1},8,["value","total"])])])]),_:1}),n(r(W),null,{title:l(()=>[s("div",Je,[s("div",Ze,[h[3]||(h[3]=s("i",{class:"pi pi-truck text-primary"},null,-1)),s("span",Ye,p(r(t)("address")),1)]),s("div",null,[n(r(V),{label:r(t)("add"),size:"small",icon:"pi pi-plus",class:"ml-2",onClick:P},null,8,["label"])])]),s("div",null,[s("span",et,p(r(t)("manageUserAddress")),1)])]),content:l(()=>[n(r(U),{value:m.value,rows:5,paginator:""},{list:l(x=>[s("div",null,[(c(!0),f(F,null,X(x.items,k=>(c(),f("div",{key:k.id},[n(Ie,{address:k,onDeleteAddress:j},null,8,["address"])]))),128))])]),_:1},8,["value"])]),_:1})]),n(r(ge),{visible:d.value,"onUpdate:visible":h[1]||(h[1]=x=>d.value=x),modal:!0,style:{width:"40vw"}},{header:l(()=>[s("div",null,[s("h3",tt,p(a.value),1)])]),default:l(()=>[v.value===1?(c(),f("div",at,[n(Te,{onAddressAdd:i})])):(c(),f("div",rt,[n($e)]))]),_:1},8,["visible"])])}}};export{ht as default};
