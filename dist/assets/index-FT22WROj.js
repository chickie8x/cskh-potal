import{s as H}from"./index-Ch_x4wUs.js";import{a as O,c as q,d as E}from"./index-BZf-QUPk.js";import{s as V}from"./index-CGpow6qJ.js";import{B as re,W as se,G as B,ak as ne,d as oe,c as f,o as d,j as w,e as A,b as r,m as z,k as P,as as W,w as l,n as N,F,A as $,y as b,r as y,J as G,a as o,L as n,M as R,P as T,i as J,t as Y,V as ie,X as le,q as X}from"./index-D6wrrLRt.js";import{a as de}from"./index-BeNzNeCO.js";import{a as ce}from"./index-BrOFA5AF.js";import{s as ue}from"./index-Bzu52mkH.js";import{h as Z,o as ee,s as L,a as te}from"./schemas-LKcQohO-.js";import{b as M}from"./index-DmsWkBcJ.js";import{s as D}from"./index-CNr2C_1C.js";import{s as U}from"./index-Cd2bO09H.js";import{b as pe}from"./helpers-BKRe39se.js";import"./index-D28SfqBj.js";var ge=`
    .p-dataview {
        position: relative;
        border-color: dt('dataview.border.color');
        border-width: dt('dataview.border.width');
        border-style: solid;
        border-radius: dt('dataview.border.radius');
        padding: dt('dataview.padding');
    }

    .p-dataview-header {
        background: dt('dataview.header.background');
        color: dt('dataview.header.color');
        border-color: dt('dataview.header.border.color');
        border-width: dt('dataview.header.border.width');
        border-style: solid;
        padding: dt('dataview.header.padding');
        border-radius: dt('dataview.header.border.radius');
    }

    .p-dataview-content {
        background: dt('dataview.content.background');
        border-color: dt('dataview.content.border.color');
        border-width: dt('dataview.content.border.width');
        border-style: solid;
        color: dt('dataview.content.color');
        padding: dt('dataview.content.padding');
        border-radius: dt('dataview.content.border.radius');
    }

    .p-dataview-footer {
        background: dt('dataview.footer.background');
        color: dt('dataview.footer.color');
        border-color: dt('dataview.footer.border.color');
        border-width: dt('dataview.footer.border.width');
        border-style: solid;
        padding: dt('dataview.footer.padding');
        border-radius: dt('dataview.footer.border.radius');
    }

    .p-dataview-paginator-top {
        border-width: dt('dataview.paginator.top.border.width');
        border-color: dt('dataview.paginator.top.border.color');
        border-style: solid;
    }

    .p-dataview-paginator-bottom {
        border-width: dt('dataview.paginator.bottom.border.width');
        border-color: dt('dataview.paginator.bottom.border.color');
        border-style: solid;
    }

    .p-dataview-loading-overlay {
        position: absolute;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
    }
`,ve={root:function(t){var s=t.props;return["p-dataview p-component",{"p-dataview-list":s.layout==="list","p-dataview-grid":s.layout==="grid"}]},header:"p-dataview-header",pcPaginator:function(t){var s=t.position;return"p-dataview-paginator-"+s},content:"p-dataview-content",emptyMessage:"p-dataview-empty-message",footer:"p-dataview-footer"},me=re.extend({name:"dataview",style:ge,classes:ve}),fe={name:"BaseDataView",extends:ce,props:{value:{type:Array,default:null},layout:{type:String,default:"list"},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:String,default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},lazy:{type:Boolean,default:!1},dataKey:{type:String,default:null}},style:me,provide:function(){return{$pcDataView:this,$parentInstance:this}}};function he(e){return ke(e)||be(e)||we(e)||ye()}function ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(e,t){if(e){if(typeof e=="string")return K(e,t);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?K(e,t):void 0}}function be(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ke(e){if(Array.isArray(e))return K(e)}function K(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,v=Array(t);s<t;s++)v[s]=e[s];return v}var Q={name:"DataView",extends:fe,inheritAttrs:!1,emits:["update:first","update:rows","page"],data:function(){return{d_first:this.first,d_rows:this.rows}},watch:{first:function(t){this.d_first=t},rows:function(t){this.d_rows=t},sortField:function(){this.resetPage()},sortOrder:function(){this.resetPage()}},methods:{getKey:function(t,s){return this.dataKey?B(t,this.dataKey):s},onPage:function(t){this.d_first=t.first,this.d_rows=t.rows,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",t)},sort:function(){var t=this;if(this.value){var s=he(this.value),v=se();return s.sort(function(u,c){var m=B(u,t.sortField),a=B(c,t.sortField);return ne(m,a,t.sortOrder,v)}),s}else return null},resetPage:function(){this.d_first=0,this.$emit("update:first",this.d_first)}},computed:{getTotalRecords:function(){return this.totalRecords?this.totalRecords:this.value?this.value.length:0},empty:function(){return!this.value||this.value.length===0},emptyMessageText:function(){var t;return((t=this.$primevue.config)===null||t===void 0||(t=t.locale)===null||t===void 0?void 0:t.emptyMessage)||""},paginatorTop:function(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom:function(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},items:function(){if(this.value&&this.value.length){var t=this.value;if(t&&t.length&&this.sortField&&(t=this.sort()),this.paginator){var s=this.lazy?0:this.d_first;return t.slice(s,s+this.d_rows)}else return t}else return null}},components:{DVPaginator:de}};function Pe(e,t,s,v,u,c){var m=oe("DVPaginator");return d(),f("div",z({class:e.cx("root")},e.ptmi("root")),[e.$slots.header?(d(),f("div",z({key:0,class:e.cx("header")},e.ptm("header")),[P(e.$slots,"header")],16)):w("",!0),c.paginatorTop?(d(),A(m,{key:1,rows:u.d_rows,first:u.d_first,totalRecords:c.getTotalRecords,pageLinkSize:e.pageLinkSize,template:e.paginatorTemplate,rowsPerPageOptions:e.rowsPerPageOptions,currentPageReportTemplate:e.currentPageReportTemplate,class:N(e.cx("pcPaginator",{position:"top"})),alwaysShow:e.alwaysShowPaginator,onPage:t[0]||(t[0]=function(a){return c.onPage(a)}),unstyled:e.unstyled,pt:e.ptm("pcPaginator")},W({_:2},[e.$slots.paginatorcontainer?{name:"container",fn:l(function(a){return[P(e.$slots,"paginatorcontainer",{first:a.first,last:a.last,rows:a.rows,page:a.page,pageCount:a.pageCount,pageLinks:a.pageLinks,totalRecords:a.totalRecords,firstPageCallback:a.firstPageCallback,lastPageCallback:a.lastPageCallback,prevPageCallback:a.prevPageCallback,nextPageCallback:a.nextPageCallback,rowChangeCallback:a.rowChangeCallback,changePageCallback:a.changePageCallback})]}),key:"0"}:void 0,e.$slots.paginatorstart?{name:"start",fn:l(function(){return[P(e.$slots,"paginatorstart")]}),key:"1"}:void 0,e.$slots.paginatorend?{name:"end",fn:l(function(){return[P(e.$slots,"paginatorend")]}),key:"2"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):w("",!0),r("div",z({class:e.cx("content")},e.ptm("content")),[c.empty?(d(),f("div",z({key:1,class:e.cx("emptyMessage")},e.ptm("emptyMessage")),[P(e.$slots,"empty",{layout:e.layout},function(){return[$(b(c.emptyMessageText),1)]})],16)):(d(),f(F,{key:0},[e.$slots.list&&e.layout==="list"?P(e.$slots,"list",{key:0,items:c.items}):w("",!0),e.$slots.grid&&e.layout==="grid"?P(e.$slots,"grid",{key:1,items:c.items}):w("",!0)],64))],16),c.paginatorBottom?(d(),A(m,{key:2,rows:u.d_rows,first:u.d_first,totalRecords:c.getTotalRecords,pageLinkSize:e.pageLinkSize,template:e.paginatorTemplate,rowsPerPageOptions:e.rowsPerPageOptions,currentPageReportTemplate:e.currentPageReportTemplate,class:N(e.cx("pcPaginator",{position:"bottom"})),alwaysShow:e.alwaysShowPaginator,onPage:t[1]||(t[1]=function(a){return c.onPage(a)}),unstyled:e.unstyled,pt:e.ptm("pcPaginator")},W({_:2},[e.$slots.paginatorcontainer?{name:"container",fn:l(function(a){return[P(e.$slots,"paginatorcontainer",{first:a.first,last:a.last,rows:a.rows,page:a.page,pageCount:a.pageCount,pageLinks:a.pageLinks,totalRecords:a.totalRecords,firstPageCallback:a.firstPageCallback,lastPageCallback:a.lastPageCallback,prevPageCallback:a.prevPageCallback,nextPageCallback:a.nextPageCallback,rowChangeCallback:a.rowChangeCallback,changePageCallback:a.changePageCallback})]}),key:"0"}:void 0,e.$slots.paginatorstart?{name:"start",fn:l(function(){return[P(e.$slots,"paginatorstart")]}),key:"1"}:void 0,e.$slots.paginatorend?{name:"end",fn:l(function(){return[P(e.$slots,"paginatorend")]}),key:"2"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):w("",!0),e.$slots.footer?(d(),f("div",z({key:3,class:e.cx("footer")},e.ptm("footer")),[P(e.$slots,"footer")],16)):w("",!0)],16)}Q.render=Pe;const _e={class:"flex items-center justify-center"},Ce={__name:"AddAddress",emits:["addressAdd"],setup(e,{emit:t}){const s=y([]),v=y([]),u=y([]),c=t,m=y(Z(ee({province:L().min(1,"Tỉnh/Thành phố is required"),district:L().min(1,"Quận/Huyện is required"),ward:L().min(1,"Phường/Xã is required"),address:L().min(1,"Địa chỉ is required")}))),a=async()=>{try{const g=await R.get("/connector/viettelpost/provinces");g.data.data.error?T.error(g.data.data.message||"Lỗi khi lấy tỉnh/thành phố"):s.value=g.data.data.data}catch(g){console.error(g)}},h=async g=>{const _=s.value.find(i=>i.PROVINCE_NAME===g)?.PROVINCE_ID;if(!_){T.error("Không tìm thấy Id tỉnh");return}try{const i=await R.get("/connector/viettelpost/districts",{params:{provinceId:_}});i.data.data.error?T.error(i.data.data.message||"Lỗi khi lấy quận/huyện"):v.value=i.data.data.data}catch(i){console.error(i)}},I=async g=>{const _=v.value.find(i=>i.DISTRICT_NAME===g)?.DISTRICT_ID;if(!_){T.error("Không tìm thấy Id quận");return}try{const i=await R.get("/connector/viettelpost/wards",{params:{districtId:_}});i.data.data.error?T.error(i.data.data.message||"Lỗi khi lấy phường/xã"):u.value=i.data.data.data}catch(i){console.error(i)}},S=async g=>{if(!g.valid){T.error("Vui lòng nhập đầy đủ thông tin");return}const _=`${g.values.address}, ${g.values.ward}, ${g.values.district}, ${g.values.province}`;try{const i=await R.post("/customer/address",{address:_});i.data.success?(T.success("Thêm địa chỉ thành công"),c("addressAdd")):T.error(i.data.message||"Lỗi khi thêm địa chỉ")}catch(i){console.error(i)}};return G(()=>{a()}),(g,_)=>(d(),f("div",_e,[o(n(te),{initialValues:{province:"",district:"",ward:"",address:""},resolver:m.value,onSubmit:S,class:"w-full flex flex-col gap-4"},{default:l(i=>[r("div",null,[o(n(M),{name:"province",optionLabel:"PROVINCE_NAME",optionValue:"PROVINCE_NAME",options:s.value,placeholder:"Tỉnh/Thành phố",onChange:j=>h(i.province.value),class:"min-w-64 w-full"},null,8,["options","onChange"]),i.province?.invalid?(d(),A(n(D),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(b(i.province.error?.message),1)]),_:2},1024)):w("",!0)]),r("div",null,[o(n(M),{name:"district",optionLabel:"DISTRICT_NAME",optionValue:"DISTRICT_NAME",options:v.value,placeholder:"Quận/Huyện",onChange:j=>I(i.district.value),class:"min-w-64 w-full"},null,8,["options","onChange"]),i.district?.invalid?(d(),A(n(D),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(b(i.district.error?.message),1)]),_:2},1024)):w("",!0)]),r("div",null,[o(n(M),{name:"ward",optionLabel:"WARDS_NAME",optionValue:"WARDS_NAME",options:u.value,placeholder:"Phường/Xã",class:"min-w-64 w-full"},null,8,["options"]),i.ward?.invalid?(d(),A(n(D),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(b(i.ward.error?.message),1)]),_:2},1024)):w("",!0)]),r("div",null,[o(n(O),{name:"address",placeholder:"Địa chỉ",class:"min-w-64 w-full"}),i.address?.invalid?(d(),A(n(D),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(b(i.address.error?.message),1)]),_:2},1024)):w("",!0)]),o(n(V),{type:"submit",label:"Thêm",class:"w-full"})]),_:1},8,["resolver"])]))}},Te={class:"flex flex-col gap-1"},Ae={class:"flex flex-col gap-1"},Se={__name:"ConnectCarrier",setup(e){const t=y(!1),s=y([{name:"Viettel Post",value:"VIETTEL_POST"}]),v=()=>{t.value=!t.value},u=y(Z(ee({carrier:L().min(1,"Đối tác vận chuyển is required"),email:L().min(1,"Email is required"),password:L().min(1,"Password is required")}))),c=m=>{console.log(m)};return(m,a)=>(d(),f("div",null,[o(n(te),{initialValues:{email:"",password:""},resolver:u.value,onSubmit:c,class:"flex flex-col gap-4 w-full"},{default:l(h=>[o(n(M),{name:"carrier",optionLabel:"name",optionValue:"value",options:s.value,placeholder:"Chọn đối tác vận chuyển",class:"min-w-64"},null,8,["options"]),r("div",Te,[o(n(U),{variant:"on"},{default:l(()=>[o(n(q),{name:"email"},{default:l(()=>[o(n(E),{class:"pi pi-envelope"}),o(n(O),{id:"email",name:"email",type:"text",fluid:""})]),_:1}),a[0]||(a[0]=r("label",{for:"email"},"Email",-1))]),_:1}),h.email?.invalid?(d(),A(n(D),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(b(h.email.error?.message),1)]),_:2},1024)):w("",!0)]),r("div",Ae,[o(n(U),{variant:"on"},{default:l(()=>[o(n(q),{name:"password"},{default:l(()=>[o(n(E),{class:"pi pi-lock"}),o(n(O),{id:"password",name:"password",type:t.value?"text":"password",fluid:""},null,8,["type"]),o(n(E),{class:N(t.value?"pi pi-eye":"pi pi-eye-slash"),onClick:v},null,8,["class"])]),_:1}),a[1]||(a[1]=r("label",{for:"password"},"Password",-1))]),_:1}),h.password?.invalid?(d(),A(n(D),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[$(b(h.password.error?.message),1)]),_:2},1024)):w("",!0)]),o(n(V),{type:"submit",severity:"primary",label:"Đăng nhập"})]),_:1},8,["resolver"])]))}},xe={class:"flex items-center gap-1 p-2 border-b border-surface-200 dark:border-surface-700 hover:bg-primary-50"},$e={class:"text-sm block w-full"},Re={class:"flex items-center justify-end gap-2"},Le={__name:"index",props:{address:{type:Object,required:!0}},emits:["deleteAddress"],setup(e,{emit:t}){const s=e,v=t,u=y(s.address.address),c=y(s.address.id),m=()=>{navigator.clipboard.writeText(u.value)},a=async()=>{try{(await R.delete("/customer/address",{data:{id:c.value}})).data.success&&(T.success("Xóa địa chỉ thành công"),v("deleteAddress"))}catch(h){console.error(h),T.error("Xóa địa chỉ thất bại")}};return(h,I)=>{const S=J("tooltip");return d(),f("div",xe,[I[0]||(I[0]=r("i",{class:"pi pi-map-marker text-primary"},null,-1)),r("span",$e,b(u.value),1),r("div",Re,[Y(o(n(V),{size:"small",icon:"pi pi-clone",variant:"outlined",rounded:"",severity:"help",onClick:m},null,512),[[S,"Đã sao chép",void 0,{focus:!0,top:!0}]]),o(n(V),{size:"small",icon:"pi pi-trash",variant:"outlined",rounded:"",severity:"danger",onClick:a})])])}}},Ve={class:"p-4"},Ie={class:"mt-4 flex flex-col gap-4"},De={class:"flex flex-col gap-4"},ze={class:"flex items-center justify-between py-2"},Ne={class:"flex items-center justify-between py-2"},Ee={class:"grid grid-cols-4 gap-4 w-full"},Me={class:"flex items-center gap-2"},Oe=["src","alt"],je={class:"font-semibold"},Be={class:"text-sm text-gray-500 flex items-center gap-1"},qe={class:"text-sm text-gray-500 flex items-center"},Fe={class:"text-sm text-gray-500 flex justify-end"},Ke={class:"flex items-center justify-between"},Qe={class:"text-color font-bold text-xl"},He={key:0},We={key:1},it={__name:"index",setup(e){const t=ie(),s=y(""),v=le(()=>t.userAddress),u=y(!1),c=y(null),m=y(""),a={GHN:"/images/carrier-logos/ghn.png",VIETTEL_POST:"/images/carrier-logos/vtp.png"},h=y([]),I=async()=>{try{const C=await R.get("/connector/viettelpost/general-info");C.data.success&&(h.value=C.data.carriers.map(p=>({id:p.id,name:p.carrier,img:a[p.carrier],status:Date.now()<new Date(p.expiredAt)?"active":"expired",expiredAt:pe(p.expiredAt)})))}catch(C){console.error(C)}},S=async()=>{try{const C=await R.get("/customer/address");C.data.success&&t.setUserAddress(C.data.data)}catch(C){console.error(C)}},g=()=>{u.value=!0,c.value=1,m.value="Thêm địa chỉ"},_=()=>{S(),u.value=!1},i=()=>{S()},j=()=>{u.value=!0,c.value=2,m.value="Kết nối"};return G(()=>{I(),S()}),(C,p)=>{const ae=J("tooltip");return d(),f("div",Ve,[p[5]||(p[5]=r("h1",{class:"text-2xl font-bold"},"Settings",-1)),p[6]||(p[6]=r("span",{class:"text-sm text-gray-500"},"Quản lý cài đặt tài khoản và các dịch vụ tích hợp.",-1)),r("div",Ie,[o(n(H),null,{title:l(()=>[...p[2]||(p[2]=[r("div",{class:"flex items-center gap-2"},[r("i",{class:"pi pi-truck text-primary"}),r("span",null,"Đơn vị vận chuyển")],-1),r("div",null,[r("span",{class:"text-sm text-gray-500"},"Quản lý các đơn vị vận chuyển đã kết nối")],-1)])]),content:l(()=>[r("div",De,[r("div",ze,[o(n(q),null,{default:l(()=>[o(n(E),{class:"pi pi-search"}),o(n(O),{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=x=>s.value=x),placeholder:"Search",size:"small"},null,8,["modelValue"])]),_:1}),o(n(V),{onClick:j,label:"Thêm mới",size:"small",icon:"pi pi-plus",class:"ml-2"})]),r("div",Ne,[o(n(Q),{value:h.value,paginator:"",rows:5,total:h.value.length,class:"w-full"},{list:l(x=>[(d(!0),f(F,null,X(x.items,k=>(d(),f("div",{key:k.id,class:"p-2 border-b border-surface-200 dark:border-surface-700"},[r("div",Ee,[r("div",Me,[r("img",{src:k.img,alt:k.name,class:"w-8 h-8 object-contain rounded-sm"},null,8,Oe),r("span",je,b(k.name),1)]),r("div",Be,[r("span",{class:N(["block w-2 h-2 rounded-full",[k.status==="active"?"bg-green-500":"bg-gray-500"]])},null,2),r("span",{class:N(["capitalize",[k.status==="active"?"text-green-600":"text-gray-600"]])},b(k.status),3)]),r("div",qe," Hết hạn: "+b(k.expiredAt),1),r("div",Fe,[Y(o(n(V),{size:"small",icon:"pi pi-sign-out",variant:"text"},null,512),[[ae,"Disconnect",void 0,{top:!0}]])])])]))),128))]),_:1},8,["value","total"])])])]),_:1}),o(n(H),null,{title:l(()=>[r("div",Ke,[p[3]||(p[3]=r("div",{class:"flex items-center gap-2"},[r("i",{class:"pi pi-truck text-primary"}),r("span",null,"Địa chỉ")],-1)),r("div",null,[o(n(V),{label:"Thêm mới",size:"small",icon:"pi pi-plus",class:"ml-2",onClick:g})])]),p[4]||(p[4]=r("div",null,[r("span",{class:"text-sm text-gray-500"},"Quản lý các địa chỉ của người dùng")],-1))]),content:l(()=>[o(n(Q),{value:v.value,rows:5,paginator:""},{list:l(x=>[r("div",null,[(d(!0),f(F,null,X(x.items,k=>(d(),f("div",{key:k.id},[o(Le,{address:k,onDeleteAddress:i},null,8,["address"])]))),128))])]),_:1},8,["value"])]),_:1})]),o(n(ue),{visible:u.value,"onUpdate:visible":p[1]||(p[1]=x=>u.value=x),modal:!0,style:{width:"40vw"}},{header:l(()=>[r("div",null,[r("h3",Qe,b(m.value),1)])]),default:l(()=>[c.value===1?(d(),f("div",He,[o(Ce,{onAddressAdd:_})])):(d(),f("div",We,[o(Se)]))]),_:1},8,["visible"])])}}};export{it as default};
